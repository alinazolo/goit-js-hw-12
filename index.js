import{a as m,S as b,i as d}from"./assets/vendor-CcCOw5fX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const h=document.querySelector(".gallery-list");class w{constructor(t,r){this.buttonEl=t,this.hiddenClass=r}showLoadMoreButton(){this.buttonEl.classList.remove(this.hiddenClass)}hideLoadMoreButton(){this.buttonEl.classList.add(this.hiddenClass)}}class M{constructor(t,r){this.loader=t,this.hiddenClass=r}showLoader(){this.loader.classList.remove(this.hiddenClass)}hideLoader(){this.loader.classList.add(this.hiddenClass)}}function p(s){const t=s.map(({webformatURL:r,largeImageURL:a,tags:e,likes:o,views:n,comments:y,downloads:L})=>`<li class="gallery-item">
          <a class="gallery-link" href="${a}">
            <img 
              class="gallery-image" 
              src="${r}" 
              alt="${e}" 
            />
          </a>
          
          <ul class="image-description">
          <li class="image-description-item">Likes <span class="description-numbers">${o}</span></li>
          <li class="image-description-item">Views <span class="description-numbers">${n}</span></li>
          <li class="image-description-item">Comments <span class="description-numbers">${y}</span></li>
          <li class="image-description-item">Download <span class="description-numbers">${L}</span></li>
          </ul>
        </li>`).join("");h.insertAdjacentHTML("beforeend",t)}function q(){h.innerHTML=""}const E="https://pixabay.com/api",S="52901164-552010a54c9c54893e8a3cd4c";m.defaults.baseURL=E;function g({page:s=1,per_page:t=20,q:r=""}={}){return m.get("/",{params:{page:s,per_page:t,q:r,key:S,image_type:"photo",orientation:"horizontal",safesearch:!0}}).then(({data:a})=>a)}const v=document.querySelector(".form");document.querySelector(".gallery-list");const B=document.querySelector(".loader"),u=document.querySelector('[data-action="load-more"]'),i={page:1,per_page:15,q:"",maxPage:0},l=new w(u,"is-hidden");l.hideLoadMoreButton();const c=new M(B,"is-hidden");c.hideLoader();let P=new b(".gallery-list a",{captions:!0,captionDelay:250});v.addEventListener("submit",$);async function $(s){s.preventDefault(),q();const t=s.currentTarget;if(i.q=t.elements.search.value.trim(),console.log(i.q),!i.q){d.error({title:"Error",message:"Write a request",position:"topRight"}),t.reset();return}c.showLoader();try{const{hits:r,total:a}=await g(i);i.maxPage=Math.ceil(a/i.per_page),p(r),P.refresh(),i.maxPage>1?(l.showLoadMoreButton(),c.hideLoader(),u.addEventListener("click",f)):l.hideLoadMoreButton()}catch(r){d.error({title:"Error",message:`There is a problem during query ${r}`,position:"topRight"})}finally{t.reset()}}async function f(){i.page+=1,c.showLoader();try{const{hits:s}=await g(i);p(s)}catch(s){d.error({title:"Error",message:`There is a problem during query ${s}`,position:"topRight"})}finally{i.page===maxPage?(l.hideLoadMoreButton,u.removeEventListener("click",f)):l.showLoadMoreButton()}}
//# sourceMappingURL=index.js.map
