import{S as M,a as g,i as u}from"./assets/vendor-MjawMu3A.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const m=document.querySelector(".gallery");class B{constructor(e,a){this.buttonEl=e,this.hiddenClass=a}showLoadMoreButton(){this.buttonEl.classList.remove(this.hiddenClass)}hideLoadMoreButton(){this.buttonEl.classList.add(this.hiddenClass)}}class q{constructor(e,a){this.loader=e,this.hiddenClass=a}showLoader(){this.loader.classList.remove(this.hiddenClass)}hideLoader(){this.loader.classList.add(this.hiddenClass)}}let c=null;function P(){c?c.refresh():c=new M(".gallery a",{captions:!0,captionDelay:250})}function p(r){const e=r.map(({webformatURL:a,largeImageURL:i,tags:o,likes:s,views:d,comments:b,downloads:w})=>`<li class="gallery-item">
          <a class="gallery-link" href="${i}">
            <img 
              class="gallery-image" 
              src="${a}" 
              alt="${o}" 
            />
          </a>
          
          <ul class="image-description">
          <li class="image-description-item">Likes <span class="description-numbers">${s}</span></li>
          <li class="image-description-item">Views <span class="description-numbers">${d}</span></li>
          <li class="image-description-item">Comments <span class="description-numbers">${b}</span></li>
          <li class="image-description-item">Download <span class="description-numbers">${w}</span></li>
          </ul>
        </li>`).join("");m.insertAdjacentHTML("beforeend",e),queueMicrotask(P)}function E(){m.innerHTML="",c&&(c.destroy(),c=null)}const S="https://pixabay.com/api",x="52901164-552010a54c9c54893e8a3cd4c";g.defaults.baseURL=S;async function f({page:r=1,per_page:e=20,q:a=""}={}){try{return(await g.get("/",{params:{page:r,per_page:e,q:a,key:x,image_type:"photo",orientation:"horizontal",safesearch:!0}})).data}catch(i){throw console.error("Error fetching images:",i),i}}const v=document.querySelector(".form");document.querySelector(".gallery");const $=document.querySelector(".loader"),y=document.querySelector('[data-action="load-more"]'),t={page:1,per_page:15,q:"",maxPage:0},n=new B(y,"is-hidden");n.hideLoadMoreButton();const l=new q($,"is-hidden");l.hideLoader();function C(){const r=document.querySelector(".gallery-image");if(!r)return 0;const{height:e}=r.getBoundingClientRect();return e}async function L(r=2){await new Promise(a=>requestAnimationFrame(a));const e=C();e>0&&window.scrollBy({top:e*r,behavior:"smooth"})}v.addEventListener("submit",R);y.addEventListener("click",I);let h=!1;async function R(r){r.preventDefault(),E();const e=r.currentTarget;if(t.q=e.elements.search.value.trim(),t.page=1,t.maxPage=1,!t.q){u.error({title:"Error",message:"Write a request",position:"topRight"}),e.reset();return}h=!0,l.showLoader(),n.hideLoadMoreButton();try{const{hits:a,total:i}=await f(t);if(t.maxPage=Math.ceil(i/t.per_page),console.log(i),a.length===0){l.hideLoader(),n.hideLoadMoreButton(),u.error({title:"Error",message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight"});return}p(a),await L(),l.hideLoader(),t.maxPage>1?n.showLoadMoreButton():n.hideLoadMoreButton()}catch(a){u.error({title:"Error",message:`There is a problem during query ${a}`,position:"topRight"})}finally{l.hideLoader(),e.reset(),h=!1}}async function I(){if(h)return;t.page=Number(t.page)||1,t.maxPage=Number(t.maxPage)||1;const r=t.page+1;if(r>t.page+1){n.hideLoadMoreButton();return}h=!0,l.showLoader(),n.hideLoadMoreButton();try{t.page=r;const{hits:e}=await f({...t,page:t.page});if(t.page>=t.maxPage){u.info({title:"End",message:"You have reached the end of the results.",position:"topRight"}),n.hideLoadMoreButton();return}p(e),await L()}catch(e){u.error({title:"Error",message:`There is a problem during query ${e}`,position:"topRight"})}finally{l.hideLoader(),h=!1,t.page<t.maxPage?n.showLoadMoreButton():n.hideLoadMoreButton()}}
//# sourceMappingURL=index.js.map
