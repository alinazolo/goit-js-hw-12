{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/main.js"],"sourcesContent":["\nconst galleryList = document.querySelector(\".gallery-list\");\nconst hiddenClass = \"is-hidden\";\n\nclass ButtonService {\n  constructor(buttonEl, hiddenClass) {\n    this.buttonEl = buttonEl;\n    this.hiddenClass = hiddenClass;\n  }\n\n  showLoadMoreButton() {\n    this.buttonEl.classList.remove(this.hiddenClass);\n  }\n\n  hideLoadMoreButton() {\n    this.buttonEl.classList.add(this.hiddenClass);\n  }\n}\n\nclass LoadService {\n  constructor(loader, hiddenClass) {\n    this.loader = loader;\n    this.hiddenClass = hiddenClass;\n  }\n\n  showLoader() {\n    this.loader.classList.remove(this.hiddenClass);\n  }\n\n  hideLoader() {\n    this.loader.classList.add(this.hiddenClass);\n  }\n}\n\n\nfunction createGallery(images) {\n  const markup = images\n      .map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n            `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img \n              class=\"gallery-image\" \n              src=\"${webformatURL}\" \n              alt=\"${tags}\" \n            />\n          </a>\n          \n          <ul class=\"image-description\">\n          <li class=\"image-description-item\">Likes <span class=\"description-numbers\">${likes}</span></li>\n          <li class=\"image-description-item\">Views <span class=\"description-numbers\">${views}</span></li>\n          <li class=\"image-description-item\">Comments <span class=\"description-numbers\">${comments}</span></li>\n          <li class=\"image-description-item\">Download <span class=\"description-numbers\">${downloads}</span></li>\n          </ul>\n        </li>`\n      )\n    .join('');\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  galleryList.innerHTML = '';\n}\n\nexport { ButtonService, LoadService, createGallery, clearGallery };","import axios from 'axios';\n\nconst BASE_URL = \"https://pixabay.com/api\";\nconst API_KEY = \"52901164-552010a54c9c54893e8a3cd4c\";\n\naxios.defaults.baseURL = BASE_URL;\n\nfunction getImagesByQuery({ page = 1, per_page = 20, q = \"\" } = {}) {\n    return axios\n    .get(\"/\", {\n         params: {\n        page,\n        per_page,\n        q,\n        key: API_KEY,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n         },\n    }).then(({ data }) => data);\n}\n\nexport default getImagesByQuery;","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst galleryList = document.querySelector(\".gallery-list\");\nconst loader = document.querySelector(\".loader\");\nconst buttonEl = document.querySelector('[data-action=\"load-more\"]');\n\n\n\nimport * as RenderFunctions from \"./render-functions.js\";\nimport getImagesByQuery from \"./pixabay-api.js\"\n\nconst params = {\n    page: 1, \n    per_page: 15,\n    q: \"\",\n    maxPage: 0,\n};\n\nconst loadMoreBtn = new RenderFunctions.ButtonService(buttonEl, \"is-hidden\");\nloadMoreBtn.hideLoadMoreButton();\n\nconst loaderMore = new RenderFunctions.LoadService(loader, \"is-hidden\");\nloaderMore.hideLoader();\n\n// --- Инициализация SimpleLightbox ---\nlet gallery = new SimpleLightbox('.gallery-list a', {\n  captions: true,\n  captionDelay: 250,\n});\n\n// --- Слушатель формы ---\nform.addEventListener(\"submit\", handleSearch);\n\nasync function handleSearch(event) {\n        event.preventDefault();\n        RenderFunctions.clearGallery();\n\nconst form = event.currentTarget;\nparams.q = form.elements.search.value.trim();\nconsole.log(params.q);\nif(!params.q) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Write a request\",\n      position: \"topRight\",\n    });\n    form.reset();\n    return;\n}\n\nloaderMore.showLoader();\n\n    try {\nconst { hits, total } = await getImagesByQuery(params);\n\nparams.maxPage = Math.ceil( total / params.per_page);\nconst images = hits;\n\nRenderFunctions.createGallery(images);\ngallery.refresh();\n\nif(params.maxPage > 1) {\n    loadMoreBtn.showLoadMoreButton();\n    loaderMore.hideLoader();\n    buttonEl.addEventListener(\"click\", handleLoadMore);\n\n} else {\n        loadMoreBtn.hideLoadMoreButton();\n}\n\n}\ncatch(err) {\n    iziToast.error({\n      title: \"Error\",\n      message: `There is a problem during query ${err}`,\n      position: \"topRight\",\n    });\n} finally {\n        form.reset();\n}\n}\n\nasync function handleLoadMore() {\n    params.page += 1; \n    loaderMore.showLoader();\n\n    try {\nconst { hits } = await getImagesByQuery(params);\nRenderFunctions.createGallery(hits);\n    }\n    catch(err) {\n      iziToast.error({\n      title: \"Error\",\n      message: `There is a problem during query ${err}`,\n      position: \"topRight\",\n    }); \n    } finally {\n        if(params.page === maxPage) {\n            loadMoreBtn.hideLoadMoreButton;\n            buttonEl.removeEventListener(\"click\", handleLoadMore);\n        } else {\n            loadMoreBtn.showLoadMoreButton();\n        }\n    }\n} \n\n/// добавить дизайн лоадера \n// потестировтаь лоадер и кнопку \n// сделать так чтобы лоадер и кнопка отражались вместе внизу страницы \n\n\n\n"],"names":["galleryList","ButtonService","buttonEl","hiddenClass","LoadService","loader","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","BASE_URL","API_KEY","axios","getImagesByQuery","page","per_page","q","data","form","params","loadMoreBtn","RenderFunctions.ButtonService","loaderMore","RenderFunctions.LoadService","gallery","SimpleLightbox","handleSearch","event","RenderFunctions.clearGallery","iziToast","hits","total","RenderFunctions.createGallery","handleLoadMore","err"],"mappings":"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"}